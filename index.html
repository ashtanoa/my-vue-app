<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <!-- ä½¿ç”¨ç»å¯¹è·¯å¾„ /favicon.ico è®©Viteè‡ªåŠ¨å¤„ç† -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- CSPç­–ç•¥ - ç¡®ä¿å®‰å…¨ -->
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests; default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';">
    
    <!-- é˜²æ­¢æœç´¢å¼•æ“ç´¢å¼•ï¼ˆç”Ÿäº§ç¯å¢ƒå¯ç§»é™¤ï¼‰ -->
    <meta name="robots" content="noindex, nofollow">
    
    <!-- ä¸»é¢˜é¢œè‰²ï¼ˆå¯é€‰ï¼‰ -->
    <meta name="theme-color" content="#409EFF">
    
    <!-- ç¦æ­¢è‡ªåŠ¨æ£€æµ‹ç”µè¯å·ç ï¼ˆç§»åŠ¨ç«¯ï¼‰ -->
    <meta name="format-detection" content="telephone=no">
    
    <title>äº¤é€šç®¡ç†ç³»ç»Ÿ</title>
    
    <!-- é¢„åŠ è½½å…³é”®èµ„æºï¼ˆViteä¼šè‡ªåŠ¨æ³¨å…¥ï¼‰ -->
    <!-- æ·»åŠ è°ƒè¯•è„šæœ¬ï¼ˆç”Ÿäº§ç¯å¢ƒå¯ç§»é™¤ï¼‰ -->
    <script>
      // é¡µé¢åŠ è½½çŠ¶æ€ç›‘æ§
      window.addEventListener('DOMContentLoaded', () => {
        console.log('ğŸš€ DOMåŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–Vueåº”ç”¨...');
        console.log('ğŸ“± è®¾å¤‡ä¿¡æ¯:', {
          userAgent: navigator.userAgent,
          platform: navigator.platform,
          language: navigator.language
        });
        console.log('ğŸ”— å½“å‰åè®®:', window.location.protocol);
        console.log('ğŸŒ å½“å‰åŸŸå:', window.location.host);
      });

      window.addEventListener('load', () => {
        console.log('âœ… é¡µé¢å®Œå…¨åŠ è½½');
        console.log('ğŸ“¦ VueæŒ‚è½½å®¹å™¨:', document.getElementById('app'));
      });

      // å…¨å±€é”™è¯¯æ•è·
      window.addEventListener('error', (event) => {
        console.error('ğŸŒ å…¨å±€é”™è¯¯:', {
          message: event.message,
          filename: event.filename,
          lineno: event.lineno,
          colno: event.colno,
          error: event.error
        });
      });

      // æ£€æŸ¥APIä»£ç†
      window.checkApiProxy = async () => {
        try {
          console.log('ğŸ” æµ‹è¯•APIä»£ç†...');
          const response = await fetch('/api/health', {
            method: 'GET',
            headers: { 'Content-Type': 'application/json' },
            mode: 'cors',
            credentials: 'include'
          });
          console.log('ğŸ“¡ APIä»£ç†æµ‹è¯•ç»“æœ:', {
            status: response.status,
            statusText: response.statusText,
            url: response.url,
            type: response.type
          });
          
          if (response.ok) {
            const data = await response.json();
            console.log('âœ… APIè¿æ¥æ­£å¸¸:', data);
            return { success: true, data };
          } else {
            console.warn('âš ï¸ APIä»£ç†å¯èƒ½æœ‰é—®é¢˜:', response.status);
            return { success: false, status: response.status };
          }
        } catch (error) {
          console.error('âŒ APIä»£ç†æµ‹è¯•å¤±è´¥:', error.message);
          return { success: false, error: error.message };
        }
      };
    </script>
  </head>
  <body>
    <!-- æ·»åŠ åŠ è½½çŠ¶æ€ï¼Œé˜²æ­¢ç™½å± -->
    <div id="app">
      <div style="
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
      ">
        <div style="text-align: center; padding: 20px;">
          <h1 style="font-size: 2.5rem; margin-bottom: 20px;">äº¤é€šç®¡ç†ç³»ç»Ÿ</h1>
          <div style="display: flex; justify-content: center; margin-bottom: 30px;">
            <div class="loading-spinner" style="
              width: 50px;
              height: 50px;
              border: 3px solid rgba(255,255,255,.3);
              border-radius: 50%;
              border-top-color: #fff;
              animation: spin 1s ease-in-out infinite;
            "></div>
          </div>
          <p style="font-size: 1.2rem; opacity: 0.9;">ç³»ç»Ÿåˆå§‹åŒ–ä¸­ï¼Œè¯·ç¨å€™...</p>
          <p id="loading-status" style="font-size: 0.9rem; opacity: 0.7; margin-top: 10px;"></p>
        </div>
        
        <div style="position: absolute; bottom: 20px; left: 0; right: 0; text-align: center; font-size: 0.8rem; opacity: 0.6;">
          <p>Powered by Vue 3 + Element Plus + Vercel</p>
        </div>
      </div>
    </div>

    <style>
      /* åŠ è½½åŠ¨ç”» */
      @keyframes spin {
        to { transform: rotate(360deg); }
      }
      
      /* åŸºç¡€æ ·å¼ */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      
      html, body {
        width: 100%;
        height: 100%;
        overflow: hidden;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
      }
      
      #app {
        width: 100%;
        height: 100%;
      }
      
      /* éšè—åŠ è½½ç•Œé¢ï¼Œå½“Vueåº”ç”¨æŒ‚è½½åä¼šæ›¿æ¢å®ƒ */
      #app > div:first-child {
        transition: opacity 0.5s ease;
      }
      
      #app.vue-mounted > div:first-child {
        opacity: 0;
        pointer-events: none;
      }
    </style>

    <script>
      // æ›´æ–°åŠ è½½çŠ¶æ€
      document.addEventListener('DOMContentLoaded', () => {
        const statusEl = document.getElementById('loading-status');
        const statusMessages = [
          'æ­£åœ¨åˆå§‹åŒ–åº”ç”¨...',
          'åŠ è½½ç»„ä»¶åº“...', 
          'é…ç½®è·¯ç”±ç³»ç»Ÿ...',
          'è¿æ¥APIæœåŠ¡...',
          'å‡†å¤‡å°±ç»ª...'
        ];
        
        let current = 0;
        const updateStatus = () => {
          if (current < statusMessages.length) {
            statusEl.textContent = statusMessages[current];
            current++;
            setTimeout(updateStatus, 800);
          }
        };
        
        updateStatus();
        
        // 10ç§’åè¶…æ—¶æ£€æŸ¥
        setTimeout(() => {
          const appContainer = document.getElementById('app');
          if (appContainer.children.length > 1) {
            console.log('âœ… Vueåº”ç”¨å·²æˆåŠŸæŒ‚è½½');
            appContainer.classList.add('vue-mounted');
          } else {
            console.warn('âš ï¸ Vueåº”ç”¨å¯èƒ½æŒ‚è½½å¤±è´¥');
            statusEl.textContent = 'åŠ è½½æ—¶é—´è¾ƒé•¿ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–åˆ·æ–°é¡µé¢...';
            
            // æä¾›æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®
            const refreshBtn = document.createElement('button');
            refreshBtn.textContent = 'ç‚¹å‡»åˆ·æ–°';
            refreshBtn.style = `
              margin-top: 15px;
              padding: 8px 20px;
              background: white;
              color: #764ba2;
              border: none;
              border-radius: 4px;
              cursor: pointer;
              font-size: 1rem;
            `;
            refreshBtn.onclick = () => location.reload();
            statusEl.parentNode.appendChild(refreshBtn);
          }
        }, 10000);
      });
    </script>
    
    <!-- Viteä¼šè‡ªåŠ¨æ³¨å…¥JSå’ŒCSSæ–‡ä»¶ -->
  </body>
</html>